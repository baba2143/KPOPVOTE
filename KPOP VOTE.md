# 📱 K-VOTE COLLECTOR（仮）プロジェクトドキュメント

## 1. プロジェクト概要と価値

| 項目 | 内容 |
| :--- | :--- |
| **アプリ名（仮）** | K-VOTE COLLECTOR |
| **核となる価値** | **外部投票情報の一元管理**と**推し別タスク効率化**。情報分散を解消し、推し活の抜け漏れを防ぐ。 |
| **ターゲット** | 10代〜30代の熱心なK-POPファン |
| **開発順序** | 🥇 **iOS先行** → 🥈 **Android開発** |
| **開発期間（MVP）** | 約5〜6ヶ月（設計から両プラットフォームリリースまで） |

## 2. MVP（実用最小限の製品）のコア機能

MVPでは、以下の機能を最優先で実装します。

| カテゴリ | 採用機能（MVPコア） |
| :--- | :--- |
| **投票管理** | 外部URLからの**タスク登録**（OGP画像自動取得含む）、マイスケジュール（一覧・ソート・進捗管理）、**締め切り通知**。 |
| **パーソナライズ** | **メンバー単位の推し設定**と、それに基づくホーム画面・タスクリストの自動フィルター。 |
| **コミュニティ** | ユーザーの**My Bias専用コミュニティ**（簡易投稿、いいね、コメント）+ **🆕 投票コレクション共有機能**（検索、保存、一括タスク追加） |
| **独自投票** | **アプリ内独自投票**の閲覧と投票アクション（無料ポイント利用）。 |
| **先送り機能（Phase 2へ）** | イベント同伴募集、チケット/グッズ交換掲示板、スポンサード投票、課金機能全般。 |

## 3. 技術構成（Tech Stack）

| 項目 | 採用技術 | 役割 |
| :--- | :--- | :--- |
| **バックエンド基盤** | **Firebase** | 認証、DB、ストレージ、通知の統合管理。 |
| **データベース (DB)** | **Cloud Firestore** (NoSQL) | 全データの管理。タスクはユーザーID下にサブコレクションとして格納。 |
| **サーバーサイドロジック** | **Cloud Functions** (Node.js) | OGP画像の自動取得、投票ポイント計算、通知トリガーの実行。 |
| **クライアント** | **iOS: Swift** / **Android: Kotlin** | ネイティブ言語でのUI/UX実装。 |

## 4. 主要なAPIエンドポイント

| 機能モジュール | 主なエンドポイント | 処理の核となる部分 |
| :--- | :--- | :--- |
| **タスク登録** | `POST /task/register` | 投票情報とURLを受け取り、OGP取得後、タスクとして登録。 |
| **タスク取得** | `GET /task/getUserTasks` | ログインユーザーのタスクリストを返す（フィルター/ソート可能）。 |
| **認証・設定** | `POST /user/setBias` | ユーザーの推しメンバーリスト（`myBias`）を更新。 |
| **コミュニティ** | `POST /community/post` | 特定の`biasMember`のコミュニティへ新規投稿を作成。 |

## 5. マイルストーン計画（概算）

| フェーズ | 期間（概算） | 主な目標 |
| :--- | :--- | :--- |
| **Phase 0** | 1ヶ月 | DBスキーマ確定、**Firebaseバックエンド基盤**（認証、タスク管理API P1）構築完了。 |
| **Phase 1** | 3ヶ月 | **iOS版 MVP**開発・QA完了、App Storeリリース。 |
| **Phase 2** | 2ヶ月 | **Android版 MVP**開発・QA完了、Google Play Storeリリース。 |

## 6. Votesタブ（Community/Discover）機能詳細 🆕

### 6.1. コンセプト
**投票コレクションプラットフォーム** - ユーザーが投票タスクをキュレーションし、共有することでコミュニティ全体で投票活動を盛り上げる機能。

**ユーザーシナリオ例**:
- BTSファンのユーザーAが「BTS 2025年1月投票まとめ」コレクションを作成し公開
- 同じくBTSファンのユーザーBが検索で発見し、保存
- ユーザーBがワンタップで全タスクを自分のTASKSタブに追加
- ユーザーBもコレクションを作成し、お互いの投票活動をサポート

### 6.2. Phase 1 MVP機能（3-4週間）

| 機能 | 説明 |
| :--- | :--- |
| **コレクション発見** | ・トレンド表示（いいね・保存数順）<br>・検索機能（タイトル、タグ、クリエイター名）<br>・カテゴリ別表示（アーティスト、イベント、期間） |
| **マイコレクション作成** | ・自分が登録したタスクから選択して作成<br>・タイトル（50文字）、説明（500文字）、タグ（最大10個）<br>・公開範囲設定（public/followers/private） |
| **コレクション保存** | ・気に入ったコレクションを保存<br>・マイコレクション > 保存済みタブで確認<br>・保存数がコレクションに反映 |
| **一括タスク追加** | ・コレクション内の全タスクをTASKSタブに一括追加<br>・重複チェック機能<br>・追加済みタスクはスキップ |

### 6.3. Phase 2 エンゲージメント機能（2-3週間）

- いいね機能（コレクションへの評価）
- コメント機能（コレクションへのフィードバック）
- フォロー機能（クリエイターをフォロー）
- 通知機能（フォロー中のユーザーの新規コレクション通知）

### 6.4. Phase 3 高度な機能（2-3週間）

- AIレコメンデーション（推しメンバーに基づく自動推薦）
- バッジシステム（人気クリエイター認定）
- ランキング機能（週間・月間トレンド）
- コレクションテンプレート（カムバック用、授賞式用など）

### 6.5. データモデル概要

```typescript
VoteCollection {
  collectionId: string;
  creatorId: string;
  title: string;              // 50文字以内
  description: string;        // 500文字以内
  tasks: VoteTask[];          // 最大50個
  tags: string[];             // 最大10個
  visibility: 'public' | 'followers' | 'private';
  likeCount: number;
  saveCount: number;
  viewCount: number;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### 6.6. 主要APIエンドポイント

| エンドポイント | メソッド | 説明 |
| :--- | :--- | :--- |
| `/api/collections` | GET | コレクション一覧取得（ページネーション対応） |
| `/api/collections/search` | GET | 検索・フィルタリング |
| `/api/collections/trending` | GET | トレンドコレクション取得 |
| `/api/collections` | POST | 新規コレクション作成 |
| `/api/collections/:id/save` | POST | コレクション保存 |
| `/api/collections/:id/add-to-tasks` | POST | 一括タスク追加 |

### 6.7. 詳細設計仕様書

完全な技術仕様、UI設計、Firestoreスキーマ、セキュリティルールについては以下を参照：
→ **[Votesタブ（Community/Discover）機能設計仕様書](./docs/votes-community-feature-spec.md)** 📄