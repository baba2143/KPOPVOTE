## 🛠️ 初期バックエンド開発指示書（2週間計画）

目標は、ユーザー認証と、MVPの核となる「投票タスク登録」に必要な基本的なAPIとデータベース構造を確立することです。

### Week 1: 基盤構築と認証の確立

| タスク ID | モジュール | タスク内容（Cloud Functions / Firestore） | 担当 | 優先度 |
| :--- | :--- | :--- | :--- | :--- |
| **B1.1** | **Firebase環境設定** | Firebaseプロジェクト設定、Firestoreスキーマ定義、セキュリティルール設定（認証済みユーザーのみアクセス許可）。 | バックエンド | P1 |
| **B1.2** | **ユーザー認証API** | Cloud Functions (`/auth/login`, `/auth/register`) を実装し、Firebase Authenticationと連携。 | バックエンド | P1 |
| **B1.3** | **推し設定API** | ユーザーの`myBias`リストを`users`コレクションに登録・更新するAPI (`/user/setBias`) を実装。 | バックエンド | P1 |

### Week 2: タスク管理APIの確立とOGP処理の実験

この週の焦点は、iOS開発者が「投票登録」と「タスク一覧取得」の機能を作り始められるようにすることです。

| タスク ID | モジュール | タスク内容（Cloud Functions / Firestore） | 担当 | 優先度 |
| :--- | :--- | :--- | :--- | :--- |
| **B2.1** | **タスク登録API（コア）** | ユーザーのタスクをFirestoreに登録するAPI (`/task/register`) を実装。ただし、OGP処理はまだ含めない。 | バックエンド | P1 |
| **B2.2** | **タスク取得API** | ログインユーザーのタスクリストを`deadline`でソートして返すAPI (`/task/getUserTasks`) を実装。 | バックエンド | P1 |
| **B2.3** | **OGP取得プロトタイプ** | **Cloud Functions**を利用し、外部URLから`og:title`と`og:image`タグを抽出する**実験的な関数**を実装し、安定性を評価する。 | バックエンド | P1 |
| **B2.4** | **ステータス更新API** | タスクの進捗ステータスを更新するAPI (`/task/updateStatus`) を実装。 | バックエンド | P1 |